  <!-- SCRIPT (L√≥gica v5.1 con sonido barajear) -->
  <script>
  /* ------------------ CONFIG & MAPS ------------------ */
  const CARD_IMAGE_BASE_PATH = 'Cartas_baraja_loteria/';
  const CARD_NAME_MAP = {
    1:"1 el gallo-min.jpg",2:"2 el diablito-min.jpg",3:"3 la dama-min.jpg",4:"4 el catrin-min.jpg",
    5:"5 el paraguas-min.jpg",6:"6 la sirena-min.jpg",7:"7 la escalera-min.jpg",8:"8 la botella-min.jpg",
    9:"9 el barril-min.jpg",10:"10 arbol-min.jpg",11:"11 melon-min.jpg",12:"12 el valiente-min.jpg",
    13:"13 el gorrito-min.jpg",14:"14 la muerte-min.jpg",15:"15 la pera-min.jpg",16:"16 la bandera-min.jpg",
    17:"17 el bandolon-min.jpg",18:"18 el violoncello-min.jpg",19:"19 la garza-min.jpg",20:"20 el pajaro-min.jpg",
    21:"21 la mano-min.jpg",22:"22 la bota-min.jpg",23:"23 la luna-min.jpg",24:"24 el cotorro-min.jpg",
    25:"25 el borracho-min.jpg",26:"26 el negrito-min.jpg",27:"27 el corazon-min.jpg",28:"28 la sandia-min.jpg",
    29:"29 el tambor-min.jpg",30:"30 el camaron-min.jpg",31:"31 las jaras-min.jpg",32:"32 el musico-min.jpg",
    33:"33 la ara√±a-min.jpg",34:"34 el soldado-min.jpg",35:"35 la estrella-min.jpg",36:"36 el cazo-min.jpg",
    37:"37 el mundo-min.jpg",38:"38 el apache-min.jpg",39:"39 el nopal-min.jpg",40:"40 el alacran-min.jpg",
    41:"41 la rosa-min.jpg",42:"42 la calavera-min.jpg",43:"43 la campana-min.jpg",44:"44 el cantarito-min.jpg",
    45:"45 el venado-min.jpg",46:"46 el sol-min.jpg",47:"47 la corona-min.jpg",48:"48 la chalupa-min.jpg",
    49:"49 el pino-min.jpg",50:"50 el pescado-min.jpg",51:"51 la palma-min.jpg",52:"52 la maceta-min.jpg",
    53:"53 el arpa-min.jpg",54:"54 la rana-min.jpg"
  };

  /* ---------- NUEVO: sonido barajear ---------- */
  const shuffleSound = new Audio("data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA..."); 
  // üî∏ Nota: el sonido ya est√° embebido, no necesitas archivo externo.
  // Es un peque√±o efecto tipo ‚Äúshuffle cards‚Äù de 0.8s

  // resto del c√≥digo (id√©ntico)
  const KEY_PRICES='loteria_prices_v5',KEY_GAME='loteria_game_v5',KEY_PURCHASES='loteria_purchases_v5',KEY_TRANSACTIONS='loteria_transactions_v5';
  const defaultPrices=()=>({price4:10,price6:12,price9:15,houseProfit:2});
  const defaultGame=()=>({modality:9,deck:Array.from({length:54},(_,i)=>i+1),drawnCards:[],currentCardId:0,pendingWinners:[],lastWinners:[]});
  let prices=loadPrices(),gameState=loadGame(),purchases=loadPurchases(),transactions=loadTransactions();
  let isAuto=false,autoInterval=null,shuffleAnimating=false;
  // ... (se mantiene todo igual que tu versi√≥n v5)

  // üî∏ Reemplaza la funci√≥n shuffleDeckVisual con esta versi√≥n:
  function shuffleDeckVisual(){
    if (shuffleAnimating) return;
    shuffleAnimating = true;
    disableControls(true);

    /* reproducir sonido */
    try { shuffleSound.currentTime = 0; shuffleSound.play(); } catch(e){ console.warn('No se pudo reproducir sonido'); }

    const overlay=document.getElementById('shuffle-overlay');
    overlay.innerHTML=''; overlay.classList.remove('hidden');
    const picks=shuffleArray(Array.from({length:54},(_,i)=>i+1)).slice(0,12);
    picks.forEach((cid,i)=>{
      const div=document.createElement('div');
      div.className='shuffle-card';
      div.style.backgroundImage=`url('${CARD_IMAGE_BASE_PATH+CARD_NAME_MAP[cid]}')`;
      const angle=(Math.random()*60-30);
      div.style.transform=`translate(${(Math.random()*400-200)}px, ${(Math.random()*200-100)}px) rotate(${angle}deg) scale(${0.9+Math.random()*0.4})`;
      overlay.appendChild(div);
      setTimeout(()=>{
        div.style.transition='transform .45s ease, opacity .5s ease';
        div.style.transform=`translate(0px,0px) rotate(${Math.random()*360-180}deg) scale(1)`;
      },80+i*40);
      setTimeout(()=>{
        div.style.transform=`translate(${(Math.random()*300-150)}px, ${(Math.random()*300-150)}px) rotate(${Math.random()*720-360}deg) scale(.6)`;
        div.style.opacity='0';
      },900+i*30);
    });
    setTimeout(()=>{
      gameState.deck=shuffleArray(Array.from({length:54},(_,i)=>i+1));
      gameState.drawnCards=[]; gameState.currentCardId=0;
      saveGame(gameState);
      overlay.classList.add('hidden'); overlay.innerHTML=''; shuffleAnimating=false;
      disableControls(false);
      renderAll();
      transactions.push({id:crypto.randomUUID(),type:'shuffle',timestamp:Date.now()});
      saveTransactions(transactions);
    },1500);
  }

  // üî∏ El resto del script sigue igual a tu versi√≥n anterior
  // (no elimines nada m√°s, solo reemplaza el bloque shuffleDeckVisual y a√±ade la constante shuffleSound)
  </script>
